# National Identity - Validated YAML (v2)
# Variables measuring national pride and attachment to country
# Validated 2025-01-11

missing_conventions:
  treat_as_na:
    codes: [-1, 0, 7, 8, 9, 97, 98, 99]
    description: "Standard missing codes"
variables:
  # ===========================================================================
  # GROUP 1: National Pride
  # ===========================================================================
  - id: nat_proud_citizen
    concept: national_identity
    description: "How proud are you to be a citizen of your country?"
    type: ordinal
    source:
      w1: null
      w2: q154
      w3: q154
      w4: q161
      w5: q166
      w6: q166
    scale:
      min: 1
      max: 4
      labels:
        1: "Not proud at all"
        2: "Not very proud"
        3: "Somewhat proud"
        4: "Very proud"
    harmonize:
      default:
        method: r_function
        fn: safe_reverse_4pt
    qc:
      valid_range: [1, 4]
      validate:
        - waves: [w2, w3, w4, w5, w6]
          phrase: "proud.*citizen"
  # ===========================================================================
  # GROUP 2: Emigration Willingness
  # ===========================================================================
  - id: nat_willing_emigrate
    concept: national_identity
    description: "Given the chance, how willing would you be to go and live in another country?"
    type: ordinal
    source:
      w1: null
      w2: q155
      w3: q155
      w4: q162
      w5: q167
      w6: q167
    scale:
      min: 1
      max: 4
      labels:
        1: "Not willing at all"
        2: "Not willing"
        3: "Willing"
        4: "Very willing"
    harmonize:
      default:
        method: r_function
        fn: safe_reverse_4pt
    qc:
      valid_range: [1, 4]
      validate:
        - waves: [w2, w3, w4, w5, w6]
          phrase: "willing.*another country|live.*other country"
