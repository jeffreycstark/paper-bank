# Corruption - Comprehensive YAML (v2)
# Variables measuring perceived corruption and personal experience

missing_conventions:
  treat_as_na:
    codes: [-1, 0, 7, 8, 9, 97, 98, 99]
    description: "Standard missing codes"

variables:
  # ===========================================================================
  # GROUP 1: Perceived Corruption Levels
  # Scale: 1-4 (1=hardly anyone, 4=almost everyone involved)
  # ===========================================================================

  - id: corrupt_local_govt
    concept: corruption
    description: "How widespread is corruption in local/municipal government?"
    type: ordinal

    source:
      w1: q114
      w2: q117
      w3: q116
      w4: q117
      w5: q124
      w6: q115

    scale:
      min: 1
      max: 4
      labels:
        1: "Hardly anyone involved"
        2: "Not a lot of officials"
        3: "Most officials"
        4: "Almost everyone"

    harmonize:
      default:
        method: r_function
        fn: safe_4pt_none

    qc:
      valid_range: [1, 4]
      validate:
        - waves: [w1, w2, w3, w4, w5, w6]
          phrase: "local|municipal"

  - id: corrupt_national_govt
    concept: corruption
    description: "How widespread is corruption in national government?"
    type: ordinal

    source:
      w1: q115
      w2: q118
      w3: q117
      w4: q118
      w5: q125
      w6: q116

    scale:
      min: 1
      max: 4
      labels:
        1: "Hardly anyone involved"
        2: "Not a lot of officials"
        3: "Most officials"
        4: "Almost everyone"

    harmonize:
      default:
        method: r_function
        fn: safe_4pt_none

    qc:
      valid_range: [1, 4]
      validate:
        - waves: [w1, w2, w3, w4, w5, w6]
          phrase: "national"

  # ===========================================================================
  # GROUP 2: Government Anti-Corruption Effectiveness
  # ===========================================================================

  - id: govt_anticorrupt_effort
    concept: corruption
    description: "Is the government working to crack down on corruption and root out bribery?"
    type: ordinal

    source:
      w1: null
      w2: q120
      w3: null
      w4: q119
      w5: null
      w6: null
    note: "Waves 2 and 4 - asks about effort/working on corruption (cf. govt_anticorrupt_effective for effectiveness)"

    scale:
      min: 1
      max: 4
      labels:
        1: "Strongly disagree"
        2: "Somewhat disagree"
        3: "Somewhat agree"
        4: "Strongly agree"

    harmonize:
      default:
        method: r_function
        fn: safe_4pt_none

    qc:
      valid_range: [1, 4]
      validate:
        - waves: [w2, w4]
          phrase: "working.*corruption|crack down"

  - id: govt_anticorrupt_effective
    concept: corruption
    description: "How effective is the government in cracking down on corruption?"
    type: ordinal

    source:
      w1: null    # TODO: find w1 mapping
      w2: null    # TODO: find w2 mapping
      w3: null    # TODO: find w3 mapping
      w4: null    # TODO: find w4 mapping
      w5: q126
      w6: q117

    scale:
      min: 1
      max: 4
      labels:
        1: "Not effective at all"
        2: "Not very effective"
        3: "Somewhat effective"
        4: "Very effective"

    harmonize:
      default:
        method: r_function
        fn: safe_4pt_none

    qc:
      valid_range: [1, 4]
      validate:
        - waves: [w5, w6]
          phrase: "effective|cracking down"

  # ===========================================================================
  # GROUP 3: Personal Experience with Corruption
  # ===========================================================================

  - id: corrupt_witnessed
    concept: corruption
    description: "Have you or anyone you know personally witnessed corruption in the past year?"
    type: nominal

    source:
      w1: q116
      w2: q119
      w3: q119
      w4: q120
      w5: q127
      w6: q118

    scale:
      min: 1
      max: 2
      labels:
        1: "Yes"
        2: "No"

    harmonize:
      default:
        method: identity

    qc:
      valid_range: [1, 2]
      validate:
        - waves: [w1, w2, w3, w4, w5, w6]
          phrase: "witness"

  - id: corrupt_witness_personal
    concept: corruption
    description: "Did you personally witness the corruption?"
    type: nominal

    source:
      w1: null    # TODO: find w1 mapping
      w2: null    # TODO: find w2 mapping
      w3: null    # TODO: find w3 mapping
      w4: null    # TODO: find w4 mapping
      w5: q127a_1   # "Did you personally witness it..."
      w6: q119a

    scale:
      min: 1
      max: 2
      labels:
        1: "Yes"
        2: "No"

    harmonize:
      default:
        method: identity

    qc:
      valid_range: [1, 2]
      validate:
        - waves: [w5, w6]
          phrase: "personally witness"

  - id: corrupt_witness_family
    concept: corruption
    description: "Were you told about the corruption by a family member who witnessed it?"
    type: nominal

    source:
      w1: null
      w2: null
      w3: null
      w4: null
      w5: q127a_2   # "told about it by a family member who personally witnessed"
      w6: q119b

    scale:
      min: 1
      max: 2
      labels:
        1: "Yes"
        2: "No"

    harmonize:
      default:
        method: identity

    qc:
      valid_range: [1, 2]
      validate:
        - waves: [w5, w6]
          phrase: "family member"

  - id: corrupt_witness_friend
    concept: corruption
    description: "Were you told about the corruption by a friend who witnessed it?"
    type: nominal

    source:
      w1: null
      w2: null
      w3: null
      w4: null
      w5: q127a_3   # "told about it by a friend who personally witnessed"
      w6: q119c

    scale:
      min: 1
      max: 2
      labels:
        1: "Yes"
        2: "No"

    harmonize:
      default:
        method: identity

    qc:
      valid_range: [1, 2]
      validate:
        - waves: [w5, w6]
          phrase: "friend"

  # ===========================================================================
  # GROUP 4: Clientelism - Gift/Dinner for Political Contact (Wave 1)
  # Binary: 1=No, 2=Yes
  # Asked for each type of political contact made
  # ===========================================================================

  - id: clientelism_gift_govt
    concept: corruption
    description: "Did you bring a gift or invite them for dinner when contacting government officials?"
    type: nominal

    source:
      w1: q089
      w2: null
      w3: null
      w4: null
      w5: null
      w6: null
    note: "Wave 1 only - clientelism indicator for government contact"

    scale:
      min: 1
      max: 2
      labels:
        1: "No"
        2: "Yes"

    harmonize:
      default:
        method: identity

    qc:
      valid_range: [1, 2]
      validate:
        - waves: [w1]
          phrase: "gift|dinner|government"

  - id: clientelism_gift_higher
    concept: corruption
    description: "Did you bring a gift or invite them for dinner when contacting higher level officials?"
    type: nominal

    source:
      w1: q090
      w2: null
      w3: null
      w4: null
      w5: null
      w6: null
    note: "Wave 1 only - clientelism indicator for higher-level contact"

    scale:
      min: 1
      max: 2
      labels:
        1: "No"
        2: "Yes"

    harmonize:
      default:
        method: identity

    qc:
      valid_range: [1, 2]
      validate:
        - waves: [w1]
          phrase: "gift|dinner|higher"

  - id: clientelism_gift_elected
    concept: corruption
    description: "Did you bring a gift or invite them for dinner when contacting elected representatives?"
    type: nominal

    source:
      w1: q091
      w2: null
      w3: null
      w4: null
      w5: null
      w6: null
    note: "Wave 1 only - clientelism indicator for elected representative contact"

    scale:
      min: 1
      max: 2
      labels:
        1: "No"
        2: "Yes"

    harmonize:
      default:
        method: identity

    qc:
      valid_range: [1, 2]
      validate:
        - waves: [w1]
          phrase: "gift|dinner|elected"

  - id: clientelism_gift_party
    concept: corruption
    description: "Did you bring a gift or invite them for dinner when contacting political party officials?"
    type: nominal

    source:
      w1: q092
      w2: null
      w3: null
      w4: null
      w5: null
      w6: null
    note: "Wave 1 only - clientelism indicator for party contact"

    scale:
      min: 1
      max: 2
      labels:
        1: "No"
        2: "Yes"

    harmonize:
      default:
        method: identity

    qc:
      valid_range: [1, 2]
      validate:
        - waves: [w1]
          phrase: "gift|dinner|party"

  - id: clientelism_gift_ngo
    concept: corruption
    description: "Did you bring a gift or invite them for dinner when contacting civil society/interest group?"
    type: nominal

    source:
      w1: q093
      w2: null
      w3: null
      w4: null
      w5: null
      w6: null
    note: "Wave 1 only - clientelism indicator for NGO/civil society contact"

    scale:
      min: 1
      max: 2
      labels:
        1: "No"
        2: "Yes"

    harmonize:
      default:
        method: identity

    qc:
      valid_range: [1, 2]
      validate:
        - waves: [w1]
          phrase: "gift|dinner|civil|interest"

  - id: clientelism_gift_media
    concept: corruption
    description: "Did you bring a gift or invite them for dinner when contacting the media?"
    type: nominal

    source:
      w1: q094
      w2: null
      w3: null
      w4: null
      w5: null
      w6: null
    note: "Wave 1 only - clientelism indicator for media contact"

    scale:
      min: 1
      max: 2
      labels:
        1: "No"
        2: "Yes"

    harmonize:
      default:
        method: identity

    qc:
      valid_range: [1, 2]
      validate:
        - waves: [w1]
          phrase: "gift|dinner|media"

  - id: clientelism_gift_demonstration
    concept: corruption
    description: "Did you bring a gift or invite them for dinner when participating in demonstrations?"
    type: nominal

    source:
      w1: q095
      w2: null
      w3: null
      w4: null
      w5: null
      w6: null
    note: "Wave 1 only - clientelism indicator for demonstration participation"

    scale:
      min: 1
      max: 2
      labels:
        1: "No"
        2: "Yes"

    harmonize:
      default:
        method: identity

    qc:
      valid_range: [1, 2]
      validate:
        - waves: [w1]
          phrase: "gift|dinner|demonstration"

  - id: clientelism_gift_other
    concept: corruption
    description: "Did you bring a gift or invite them for dinner for other political contacts?"
    type: nominal

    source:
      w1: q096
      w2: null
      w3: null
      w4: null
      w5: null
      w6: null
    note: "Wave 1 only - clientelism indicator for other contacts"

    scale:
      min: 1
      max: 2
      labels:
        1: "No"
        2: "Yes"

    harmonize:
      default:
        method: identity

    qc:
      valid_range: [1, 2]
      validate:
        - waves: [w1]
          phrase: "gift|dinner|other"

