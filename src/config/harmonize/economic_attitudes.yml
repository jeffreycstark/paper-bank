# Economic Attitudes - Comprehensive YAML (v2)
# Variables measuring economic fairness, security, and intergenerational mobility

missing_conventions:
  treat_as_na:
    codes: [-1, 0, 7, 8, 9, 97, 98, 99]
    description: "Standard missing codes"

variables:
  # ===========================================================================
  # GROUP 1: Income Fairness
  # ===========================================================================

  - id: econ_distribution_fair
    concept: economic_attitudes
    description: "How fair do you think income distribution is in our country?"
    type: ordinal

    source:
      w1: null
      w2: null
      w3: null
      w4: null
      w5: q159
      w6: q159

    scale:
      min: 1
      max: 4
      labels:
        1: "Very unfair"
        2: "Unfair"
        3: "Fair"
        4: "Very fair"

    harmonize:
      default:
        method: r_function
        fn: safe_reverse_4pt

    qc:
      valid_range: [1, 4]
      validate:
        - waves: [w5, w6]
          phrase: "income.*distribut|distribut.*fair"

  - id: econ_family_income_fair
    concept: economic_attitudes
    description: "Considering all effort, is the income your family receives fair?"
    type: ordinal

    source:
      w1: null
      w2: null
      w3: null
      w4: q159
      w5: q163
      w6: q163

    scale:
      min: 1
      max: 4
      labels:
        1: "Very unfair"
        2: "Unfair"
        3: "Fair"
        4: "Very fair"

    harmonize:
      default:
        method: r_function
        fn: safe_reverse_4pt

    qc:
      valid_range: [1, 4]
      validate:
        - waves: [w4, w5, w6]
          phrase: "family.*income.*fair|effort.*income"

  # ===========================================================================
  # GROUP 2: Economic Security
  # ===========================================================================

  - id: econ_worried_lose_income
    concept: economic_attitudes
    description: "How worried are you that your family might lose its major source of income?"
    type: ordinal

    source:
      w1: null
      w2: null
      w3: null
      w4: null
      w5: q161
      w6: q161

    scale:
      min: 1
      max: 4
      labels:
        1: "Not worried at all"
        2: "Not too worried"
        3: "Somewhat worried"
        4: "Very worried"

    harmonize:
      default:
        method: r_function
        fn: safe_reverse_4pt
        note: "Original: 1=very worried to 4=not at all; Reversed so higher = more worried"

    qc:
      valid_range: [1, 4]
      validate:
        - waves: [w5, w6]
          phrase: "worried.*income|lose.*income"

  - id: econ_income_loss_severity
    concept: economic_attitudes
    description: "If you lost your main income source, how serious would it be?"
    type: ordinal

    source:
      w1: null
      w2: null
      w3: null
      w4: q158
      w5: q162
      w6: q162

    scale:
      min: 1
      max: 3
      labels:
        1: "Could manage just fine"
        2: "Serious but could deal with it"
        3: "Serious and would have difficulty coping"

    harmonize:
      default:
        method: r_function
        fn: safe_reverse_3pt
        note: "Original: 1=serious difficulty to 3=manage fine; Reversed so higher = more serious"

    qc:
      valid_range: [1, 3]
      validate:
        - waves: [w4, w5, w6]
          phrase: "lose.*income.*serious|hypothetical.*income"

  # ===========================================================================
  # GROUP 3: Intergenerational Mobility
  # ===========================================================================

  - id: econ_generation_opportunity
    concept: economic_attitudes
    description: "Compared to parents' generation, does my generation have more or fewer opportunities?"
    type: ordinal

    source:
      w1: null
      w2: null
      w3: null
      w4: q160
      w5: q164
      w6: q164

    scale:
      min: 1
      max: 5
      labels:
        1: "Substantially fewer opportunities"
        2: "Fewer opportunities"
        3: "About the same"
        4: "More opportunities"
        5: "Substantially more opportunities"

    harmonize:
      default:
        method: r_function
        fn: safe_reverse_5pt
        note: "Original: 1=substantially more to 5=substantially fewer; Reversed"

    qc:
      valid_range: [1, 5]
      validate:
        - waves: [w4, w5, w6]
          phrase: "generation.*opportunit|parent.*generation"

  - id: econ_next_generation_life
    concept: economic_attitudes
    description: "Will the next generation have a better or worse life than our generation?"
    type: ordinal

    source:
      w1: null
      w2: null
      w3: null
      w4: null
      w5: q165
      w6: q165

    scale:
      min: 1
      max: 5
      labels:
        1: "Much worse"
        2: "A little worse"
        3: "About the same"
        4: "A little better"
        5: "Much better"

    harmonize:
      default:
        method: r_function
        fn: safe_reverse_5pt
        note: "Original: 1=much better to 5=much worse; Reversed so higher = more optimistic"

    qc:
      valid_range: [1, 5]
      validate:
        - waves: [w5, w6]
          phrase: "next generation.*better|generation.*worse"

  # ===========================================================================
  # State Role in Economy
  # ===========================================================================

  - id: econ_state_ownership
    concept: economic_attitudes
    description: "The government should maintain ownership of major state-owned enterprises"
    type: ordinal

    source:
      w1: q140
      w2: null
      w3: null
      w4: null
      w5: null
      w6: null
    note: "Wave 1 only - part of ideological cleavage battery"

    scale:
      min: 1
      max: 4
      labels:
        1: "Strongly agree"
        2: "Somewhat agree"
        3: "Somewhat disagree"
        4: "Strongly disagree"

    harmonize:
      default:
        method: r_function
        fn: safe_reverse_4pt
        note: "Reversed so higher = more support for state ownership"

    qc:
      valid_range: [1, 4]
      validate:
        - waves: [w1]
          phrase: "state.*enterprise|government.*ownership"

  - id: econ_central_authority
    concept: economic_attitudes
    description: "The national government should have more authority over local decisions than it does now"
    type: ordinal

    source:
      w1: q141
      w2: null
      w3: null
      w4: null
      w5: null
      w6: null
    note: "Wave 1 only - part of ideological cleavage battery"

    scale:
      min: 1
      max: 4
      labels:
        1: "Strongly agree"
        2: "Somewhat agree"
        3: "Somewhat disagree"
        4: "Strongly disagree"

    harmonize:
      default:
        method: r_function
        fn: safe_reverse_4pt
        note: "Reversed so higher = more support for central authority"

    qc:
      valid_range: [1, 4]
      validate:
        - waves: [w1]
          phrase: "national.*authority|local decisions"

  # ===========================================================================
  # GROUP 5: Inequality and Economic Fairness (Wave 4)
  # ===========================================================================

  - id: econ_inequality_statement
    concept: economic_attitudes
    description: "Which of these statements comes closer to your view? (inequality/fairness)"
    type: nominal

    source:
      w1: null
      w2: null
      w3: null
      w4: q154
      w5: null
      w6: null
    note: "Wave 4 - statement pair about inequality, see codebook for specific wording"

    scale:
      min: 1
      max: 2
      labels:
        1: "Statement A"
        2: "Statement B"

    harmonize:
      default:
        method: identity

    qc:
      valid_range: [1, 2]
      validate:
        - waves: [w4]
          phrase: "statement.*view"

  - id: econ_income_distribution_fair
    concept: economic_attitudes
    description: "How fair do you think income distribution is in the country?"
    type: ordinal

    source:
      w1: null
      w2: null
      w3: null
      w4: q155
      w5: null
      w6: null
    note: "Wave 4 - perceived fairness of income distribution"

    scale:
      min: 1
      max: 4
      labels:
        1: "Very unfair"
        2: "Somewhat unfair"
        3: "Somewhat fair"
        4: "Very fair"

    harmonize:
      default:
        method: r_function
        fn: safe_4pt_none

    qc:
      valid_range: [1, 4]
      validate:
        - waves: [w4]
          phrase: "income distribution.*fair"

  - id: econ_govt_reduce_inequality
    concept: economic_attitudes
    description: "It is the responsibility of the government to reduce the differences between people with high income and those with low incomes"
    type: ordinal

    source:
      w1: null
      w2: null
      w3: null
      w4: q156
      w5: null
      w6: null
    note: "Wave 4 - support for redistribution"

    scale:
      min: 1
      max: 4
      labels:
        1: "Strongly disagree"
        2: "Somewhat disagree"
        3: "Somewhat agree"
        4: "Strongly agree"

    harmonize:
      default:
        method: r_function
        fn: safe_4pt_none

    qc:
      valid_range: [1, 4]
      validate:
        - waves: [w4]
          phrase: "government.*reduce.*difference|high income.*low income"

  - id: econ_income_loss_concern
    concept: economic_attitudes
    description: "How concerned are you about the loss of your major source of income within the next 12 months?"
    type: ordinal

    source:
      w1: null
      w2: null
      w3: null
      w4: q157
      w5: null
      w6: null
    note: "Wave 4 - economic insecurity"

    scale:
      min: 1
      max: 4
      labels:
        1: "Not at all concerned"
        2: "Not too concerned"
        3: "Somewhat concerned"
        4: "Very concerned"

    harmonize:
      default:
        method: r_function
        fn: safe_4pt_none

    qc:
      valid_range: [1, 4]
      validate:
        - waves: [w4]
          phrase: "loss.*income|concerned.*income"

  - id: econ_family_income_fair_6pt
    concept: economic_attitudes
    description: "Considering all the effort that you and your family members have made in the past, do you think the income that your family currently receives is fair?"
    type: ordinal

    source:
      w1: null
      w2: null
      w3: null
      w4: q159a
      w5: null
      w6: null
    note: "Wave 4 only - 6-point version (q159a). See econ_family_income_fair for 4-point version (q159)"

    scale:
      min: 1
      max: 6
      labels:
        1: "Very unfair"
        2: "Somewhat unfair"
        3: "A little unfair"
        4: "A little fair"
        5: "Somewhat fair"
        6: "Very fair"

    harmonize:
      default:
        method: identity

    qc:
      valid_range: [1, 6]
      validate:
        - waves: [w4]
          phrase: "family.*income.*fair|effort.*fair"

