# Economic Attitudes - Comprehensive YAML (v2)
# Variables measuring economic fairness, security, and intergenerational mobility

missing_conventions:
  treat_as_na:
    codes: [-1, 0, 7, 8, 9, 97, 98, 99]
    description: "Standard missing codes"

variables:
  # ===========================================================================
  # GROUP 1: Income Fairness
  # ===========================================================================

  - id: econ_distribution_fair
    concept: economic_attitudes
    description: "How fair do you think income distribution is in our country?"
    type: ordinal

    source:
      w1: null
      w2: null
      w3: null
      w4: null
      w5: null
      w6: q159

    scale:
      min: 1
      max: 4
      labels:
        1: "Very unfair"
        2: "Unfair"
        3: "Fair"
        4: "Very fair"

    harmonize:
      default:
        method: r_function
        fn: safe_reverse_4pt

    qc:
      valid_range: [1, 4]
      validate:
        - waves: [w6]
          phrase: "income.*distribut|distribut.*fair"

  - id: econ_family_income_fair
    concept: economic_attitudes
    description: "Considering all effort, is the income your family receives fair?"
    type: ordinal

    source:
      w1: null
      w2: null
      w3: null
      w4: q159
      w5: q163
      w6: q163

    scale:
      min: 1
      max: 4
      labels:
        1: "Very unfair"
        2: "Unfair"
        3: "Fair"
        4: "Very fair"

    harmonize:
      default:
        method: r_function
        fn: safe_reverse_4pt

    qc:
      valid_range: [1, 4]
      validate:
        - waves: [w4, w5, w6]
          phrase: "family.*income.*fair|effort.*income"

  # ===========================================================================
  # GROUP 2: Economic Security
  # ===========================================================================

  - id: econ_worried_lose_income
    concept: economic_attitudes
    description: "How worried are you that your family might lose its major source of income?"
    type: ordinal

    source:
      w1: null
      w2: null
      w3: null
      w4: null
      w5: q161
      w6: q161

    scale:
      min: 1
      max: 4
      labels:
        1: "Not worried at all"
        2: "Not too worried"
        3: "Somewhat worried"
        4: "Very worried"

    harmonize:
      default:
        method: r_function
        fn: safe_reverse_4pt
        note: "Original: 1=very worried to 4=not at all; Reversed so higher = more worried"

    qc:
      valid_range: [1, 4]
      validate:
        - waves: [w5, w6]
          phrase: "worried.*income|lose.*income"

  - id: econ_income_loss_severity
    concept: economic_attitudes
    description: "If you lost your main income source, how serious would it be?"
    type: ordinal

    source:
      w1: null
      w2: null
      w3: null
      w4: q158
      w5: q162
      w6: q162

    scale:
      min: 1
      max: 3
      labels:
        1: "Could manage just fine"
        2: "Serious but could deal with it"
        3: "Serious and would have difficulty coping"

    harmonize:
      default:
        method: r_function
        fn: safe_reverse_3pt
        note: "Original: 1=serious difficulty to 3=manage fine; Reversed so higher = more serious"

    qc:
      valid_range: [1, 3]
      validate:
        - waves: [w4, w5, w6]
          phrase: "lose.*income.*serious|hypothetical.*income"

  # ===========================================================================
  # GROUP 3: Intergenerational Mobility
  # ===========================================================================

  - id: econ_generation_opportunity
    concept: economic_attitudes
    description: "Compared to parents' generation, does my generation have more or fewer opportunities?"
    type: ordinal

    source:
      w1: null
      w2: null
      w3: null
      w4: q160
      w5: q164
      w6: q164

    scale:
      min: 1
      max: 5
      labels:
        1: "Substantially fewer opportunities"
        2: "Fewer opportunities"
        3: "About the same"
        4: "More opportunities"
        5: "Substantially more opportunities"

    harmonize:
      default:
        method: r_function
        fn: safe_reverse_5pt
        note: "Original: 1=substantially more to 5=substantially fewer; Reversed"

    qc:
      valid_range: [1, 5]
      validate:
        - waves: [w4, w5, w6]
          phrase: "generation.*opportunit|parent.*generation"

  - id: econ_next_generation_life
    concept: economic_attitudes
    description: "Will the next generation have a better or worse life than our generation?"
    type: ordinal

    source:
      w1: null
      w2: null
      w3: null
      w4: null
      w5: q165
      w6: q165

    scale:
      min: 1
      max: 5
      labels:
        1: "Much worse"
        2: "A little worse"
        3: "About the same"
        4: "A little better"
        5: "Much better"

    harmonize:
      default:
        method: r_function
        fn: safe_reverse_5pt
        note: "Original: 1=much better to 5=much worse; Reversed so higher = more optimistic"

    qc:
      valid_range: [1, 5]
      validate:
        - waves: [w5, w6]
          phrase: "next generation.*better|generation.*worse"

